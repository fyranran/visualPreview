{"version":3,"sources":["webpack://visualEditor-[name]/./src/views/Login/index.vue?ca99","webpack://visualEditor-[name]/./src/views/Login/index.vue"],"names":["_hoisted_1","style","_hoisted_2","setup","__props","router","obj","isIos","isMobile","wechatCode","host","getQueryVariable","variable","query","window","location","href","slice","lastIndexOf","length","vars","split","i","pair","loginHandle","e","data","localStorage","setItem","getItem","replace","removeEventListener","sessionStorage","browser","versions","u","navigator","userAgent","trident","indexOf","presto","webKit","gecko","mobile","match","ios","android","iPhone","iPad","webApp","weixin","toLowerCase","language","addEventListener","_ctx","_cache","Transparency","src","frameborder","height","width","__exports__"],"mappings":"uPAGMA,EAAa,CAAEC,MAAO,CAAC,OAAS,UAChCC,EAAa,CAAC,OAMQ,+BAAiB,CAC3CC,MAD2C,SACrCC,GAGR,IAAIC,EAAS,iBACPC,EAAM,sBAAS,CACnBC,OAAO,EACPC,UAAU,EACVC,WAAY,GAEZC,KAAM,6BAGFC,EAAwB,SAACC,GAO7B,IANA,IAAIC,EAAQC,OAAOC,SAASC,KAAKC,MAC/BH,OAAOC,SAASC,KAAKE,YAAY,KAAO,EACxCJ,OAAOC,SAASC,KAAKG,QAEnBC,EAAOP,EAAMQ,MAAM,KAEdC,EAAI,EAAGA,EAAIF,EAAKD,OAAQG,IAAK,CACpC,IAAIC,EAAOH,EAAKE,GAAGD,MAAM,KACzB,GAAIE,EAAK,IAAMX,EACb,OAAOW,EAAK,GAGhB,OAAO,GAEHC,EAAW,yDAAG,WAAOC,GAAP,qFACdA,EAAEC,KAAKP,OADO,gCAcVQ,aAAaC,QAAQ,QAASH,EAAEC,MAdtB,OAeLC,aAAaE,QAAQ,SAChCxB,EAAOyB,QAAP,KAhBgB,2CAAH,sDAiFjB,OA7DA,0BAAY,WACVhB,OAAOiB,oBAAoB,UAAWP,GAAa,MAGrD,wBAAU,WAGyB,GAA7Bb,EAAiB,UACnBqB,eAAeJ,QAAQ,QAAS,QAG9BjB,EAAiB,UACnBL,EAAIG,WAAaE,EAAiB,SAGpC,IAAIsB,EAAU,CAEZC,SAAW,WACT,IAAIC,EAAIC,UAAUC,UAElB,MAAO,CACLC,QAASH,EAAEI,QAAQ,YAAc,EAEjCC,OAAQL,EAAEI,QAAQ,WAAa,EAE/BE,OAAQN,EAAEI,QAAQ,gBAAkB,EAEpCG,MAAOP,EAAEI,QAAQ,UAAY,IAA4B,GAAvBJ,EAAEI,QAAQ,SAE5CI,SAAUR,EAAES,MAAM,yBAElBC,MAAOV,EAAES,MAAM,8BAEfE,QAASX,EAAEI,QAAQ,YAAc,GAAKJ,EAAEI,QAAQ,UAAY,EAE5DQ,OAAQZ,EAAEI,QAAQ,WAAa,EAE/BS,KAAMb,EAAEI,QAAQ,SAAW,EAE3BU,QAAgC,GAAxBd,EAAEI,QAAQ,UAElBW,OAAQf,EAAEgB,cAAcZ,QAAQ,mBAAqB,GAxB9C,GA4BXa,SAAUhB,UAAUgB,SAASD,gBAG7BlB,EAAQC,SAASW,KACjBZ,EAAQC,SAASc,MACjBf,EAAQC,SAASa,UAEjBzC,EAAIC,OAAQ,IAEV0B,EAAQC,SAASW,KAAOZ,EAAQC,SAASY,WAC3CxC,EAAIE,UAAW,GAGjBM,OAAOuC,iBAAiB,UAAW7B,GAAa,MAG3C,SAAC8B,EAAUC,GAChB,OAAQ,yBAAc,gCAAoB,MAAOvD,EAAY,CAC3D,gCAAoB,SAAU,CAC5BwD,aAAc,OACd,6BAA8B,qBAC9BC,IACE,mBAAOnD,GAAKG,WACR,mBAAOH,GAAKI,KAAO,uBAAyB,mBAAOJ,GAAKG,WACxD,mBAAOH,GAAKI,KAAO,iBAEzBgD,YAAa,IACbC,OAAQ,OACRC,MAAO,QACN,KAAM,EAAG1D,SCjIhB,MAAM2D,EAAc,EAEL","file":"js/chunk-2d21f841.caebec44.js","sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { style: {\"height\":\"100vh\"} }\nconst _hoisted_2 = [\"src\"]\n\nimport { useRouter } from \"vue-router\";\nimport { onMounted, onUnmounted, reactive } from \"vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  setup(__props) {\n\n// import screenfull from \"screenfull\"\nlet router = useRouter();\nconst obj = reactive({\n  isIos: false,\n  isMobile: false,\n  wechatCode: \"\",\n  // host: process.env.VUE_APP_BASE_URL,\n  host: \"https://testxr.piesat.cn\",\n});\n// 获取浏览器参数\nconst getQueryVariable: any = (variable: any) => {\n  var query = window.location.href.slice(\n    window.location.href.lastIndexOf(\"?\") + 1,\n    window.location.href.length\n  );\n  var vars = query.split(\"&\");\n\n  for (var i = 0; i < vars.length; i++) {\n    var pair = vars[i].split(\"=\");\n    if (pair[0] == variable) {\n      return pair[1];\n    }\n  }\n  return false;\n};\nconst loginHandle = async (e: any) => {\n  if (e.data.length) {\n    // 获取token\n    // 此处内容针对自己项目自行编写\n    // if (!obj.isIos && !sessionStorage.getItem(\"unity\")) {\n    //   if (!screenfull.isEnabled) {\n    //     // this.$message({\n    //     //   message: 'you browser can not work',\n    //     //   type: 'warning',\n    //     // })\n    //     return false\n    //   }\n    //   screenfull.toggle()\n    // }\n    await localStorage.setItem(\"token\", e.data); //存储到本地\n    const id = localStorage.getItem(\"pptid\");\n    router.replace(`/`);\n  }\n};\n//销毁\nonUnmounted(() => {\n  window.removeEventListener(\"message\", loginHandle, false);\n});\n//挂载后\nonMounted(() => {\n  // 此处对因当前项目需求自定义编写\n  // 判断是否为unity浏览器\n  if (getQueryVariable(\"unity\") == 1) {\n    sessionStorage.setItem(\"unity\", \"true\");\n  }\n  // 获取微信登录需要的code\n  if (getQueryVariable(\"code\")) {\n    obj.wechatCode = getQueryVariable(\"code\");\n  }\n  // 判断设备终端\n  var browser = {\n    /*判断访问终端*/\n    versions: (function () {\n      var u = navigator.userAgent;\n      // app = navigator.appVersion\n      return {\n        trident: u.indexOf(\"Trident\") > -1,\n        /*IE内核*/\n        presto: u.indexOf(\"Presto\") > -1,\n        /*opera内核*/\n        webKit: u.indexOf(\"AppleWebKit\") > -1,\n        /*苹果、谷歌内核*/\n        gecko: u.indexOf(\"Gecko\") > -1 && u.indexOf(\"KHTML\") == -1,\n        /*火狐内核*/\n        mobile: !!u.match(/AppleWebKit.*Mobile.*/),\n        /*是否为移动终端*/\n        ios: !!u.match(/\\(i[^]+( U)? CPU.+Mac OS X/),\n        /*ios终端*/\n        android: u.indexOf(\"Android\") > -1 || u.indexOf(\"Linux\") > -1,\n        /*android终端或者uc浏览器*/\n        iPhone: u.indexOf(\"iPhone\") > -1,\n        /*是否为iPhone或者QQHD浏览器*/\n        iPad: u.indexOf(\"iPad\") > -1,\n        /*是否iPad*/\n        webApp: u.indexOf(\"Safari\") == -1,\n        /*是否web应该程序，没有头部与底部*/\n        weixin: u.toLowerCase().indexOf(\"micromessenger\") > -1 /*是否是微信*/,\n      };\n    })(),\n    // language: (navigator.browserLanguage || navigator.language).toLowerCase(),\n    language: navigator.language.toLowerCase(),\n  };\n  if (\n    browser.versions.ios ||\n    browser.versions.iPad ||\n    browser.versions.iPhone\n  ) {\n    obj.isIos = true;\n  }\n  if (browser.versions.ios || browser.versions.android) {\n    obj.isMobile = true;\n  }\n  // 登录系统登录成功后的回调\n  window.addEventListener(\"message\", loginHandle, false);\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"iframe\", {\n      Transparency: \"true\",\n      \"element-loading-background\": \"rgba(0, 0, 0, 0.8)\",\n      src: \n        _unref(obj).wechatCode\n          ? _unref(obj).host + '/login/#/login?code=' + _unref(obj).wechatCode\n          : _unref(obj).host + '/login/#/login'\n      ,\n      frameborder: \"0\",\n      height: \"100%\",\n      width: \"100%\"\n    }, null, 8, _hoisted_2)\n  ]))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./index.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"sourceRoot":""}